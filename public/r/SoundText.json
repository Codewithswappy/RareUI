{
  "name": "SoundText",
  "type": "registry:ui",
  "dependencies": [
    "react",
    "framer-motion",
    "@types/react",
    "typescript"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/rareui/Text Animation/SoundText.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useRef, useCallback, useEffect } from \"react\";\r\nimport { motion, useAnimationControls } from \"framer-motion\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SoundTextProps {\r\n    text: string;\r\n    className?: string;\r\n    basePitch?: number; // Base frequency in Hz\r\n}\r\n\r\n// Simple Pentatonic Scale frequencies (approximate) relative to a base\r\n// We will just multiply the base freq by these ratios\r\nconst SCALE_RATIOS = [\r\n    1,          // Root\r\n    1.125,      // Major 2nd\r\n    1.25,       // Major 3rd\r\n    1.5,        // Perfect 5th\r\n    1.667,      // Major 6th\r\n    2           // Octave\r\n];\r\n\r\nexport default function SoundText({\r\n    text = \"Hover over me\",\r\n    className,\r\n    basePitch = 300,\r\n}: SoundTextProps) {\r\n    const audioContextRef = useRef<AudioContext | null>(null);\r\n\r\n    // Initialize AudioContext lazily on user interaction\r\n    const initAudio = useCallback(() => {\r\n        if (!audioContextRef.current) {\r\n            audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n        }\r\n        if (audioContextRef.current.state === \"suspended\") {\r\n            audioContextRef.current.resume();\r\n        }\r\n    }, []);\r\n\r\n    const playSound = useCallback((index: number) => {\r\n        initAudio(); // Ensure context is ready\r\n        if (!audioContextRef.current) return;\r\n\r\n        const ctx = audioContextRef.current;\r\n        const osc = ctx.createOscillator();\r\n        const gain = ctx.createGain();\r\n\r\n        // Calculate pitch based on index to create a melody effect\r\n        // Cycle through the scale\r\n        const scaleIndex = index % SCALE_RATIOS.length;\r\n        const octaveOffset = Math.floor(index / SCALE_RATIOS.length);\r\n        const frequency = basePitch * SCALE_RATIOS[scaleIndex] * Math.pow(2, octaveOffset * 0.5); // Slight octave overlapping for smoother sound\r\n\r\n        osc.type = \"sine\";\r\n        osc.frequency.setValueAtTime(frequency, ctx.currentTime);\r\n\r\n        // Envelope: Fast attack, smooth decay\r\n        gain.gain.setValueAtTime(0, ctx.currentTime);\r\n        gain.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.02); // Attack\r\n        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.3); // Decay\r\n\r\n        osc.connect(gain);\r\n        gain.connect(ctx.destination);\r\n\r\n        osc.start();\r\n        osc.stop(ctx.currentTime + 0.4);\r\n    }, [basePitch, initAudio]);\r\n\r\n    // Cleanup\r\n    useEffect(() => {\r\n        return () => {\r\n            if (audioContextRef.current) {\r\n                audioContextRef.current.close();\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const letters = text.split(\"\");\r\n\r\n    const containerVariants = {\r\n        hover: {\r\n            transition: { staggerChildren: 0.05 }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            className={cn(\"flex flex-wrap cursor-default select-none\", className)}\r\n            variants={containerVariants}\r\n            initial=\"initial\"\r\n            whileHover=\"hover\"\r\n            onMouseEnter={initAudio}\r\n        >\r\n            {letters.map((letter, index) => {\r\n                // If it's a space, render it but no sound triggers usually (or keep it for rhythm)\r\n                if (letter === \" \") {\r\n                    return <span key={index} className=\"w-2\"> </span>;\r\n                }\r\n\r\n                return (\r\n                    <Letter\r\n                        key={index}\r\n                        char={letter}\r\n                        index={index}\r\n                        onHover={() => playSound(index)}\r\n                    />\r\n                );\r\n            })}\r\n        </motion.div>\r\n    );\r\n}\r\n\r\n// Individual Letter Component for cleaner animation isolation\r\nconst Letter = ({ char, index, onHover }: { char: string; index: number; onHover: () => void }) => {\r\n    const controls = useAnimationControls();\r\n\r\n    // Random subtle rotation for \"organic\" feel\r\n    const randomRotate = Math.random() * 10 - 5;\r\n\r\n    return (\r\n        <motion.span\r\n            className=\"inline-block relative\"\r\n            onMouseEnter={() => {\r\n                onHover();\r\n                controls.start({\r\n                    y: -10,\r\n                    scale: 1.3,\r\n                    rotate: randomRotate,\r\n                    color: \"#A855F7\", // Purple-500 highlight\r\n                    textShadow: \"0px 0px 8px rgba(168, 85, 247, 0.6)\",\r\n                    transition: { type: \"spring\", stiffness: 500, damping: 10 }\r\n                });\r\n            }}\r\n            onMouseLeave={() => {\r\n                controls.start({\r\n                    y: 0,\r\n                    scale: 1,\r\n                    rotate: 0,\r\n                    color: \"inherit\",\r\n                    textShadow: \"none\",\r\n                    transition: { type: \"spring\", stiffness: 300, damping: 20 }\r\n                });\r\n            }}\r\n            animate={controls}\r\n            // Add initial subtle fade-in for page load\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            transition={{ delay: index * 0.02, type: \"spring\", stiffness: 200 }}\r\n        >\r\n            {char}\r\n        </motion.span>\r\n    );\r\n};\r\n",
      "type": "registry:ui",
      "target": "components/rareui/Text Animation/SoundText.tsx"
    }
  ]
}