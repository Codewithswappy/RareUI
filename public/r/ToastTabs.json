{
  "name": "ToastTabs",
  "type": "registry:ui",
  "dependencies": [
    "react",
    "framer-motion",
    "@types/react",
    "typescript"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/rareui/ToastTabs.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface TabData {\r\n    id: string | number;\r\n    image: string;\r\n    title: string;\r\n    description: string;\r\n}\r\n\r\ninterface ToastTabsProps {\r\n    tabs?: TabData[];\r\n    autoplay?: boolean;\r\n    autoplayDelay?: number; // ms\r\n    ringColor?: string;\r\n    className?: string;\r\n}\r\n\r\nconst defaultTabs: TabData[] = [\r\n    {\r\n        id: 1,\r\n        image: \"https://images.unsplash.com/photo-1599566150163-29194dcaad36?q=80&w=200&auto=format&fit=crop\",\r\n        title: \"Sarah Jenkins\",\r\n        description: \"The workflow integration is simply seamless. It has completely transformed how our team communicates and shares documents in real-time.\"\r\n    },\r\n    {\r\n        id: 2,\r\n        image: \"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=200&auto=format&fit=crop\",\r\n        title: \"Mark Thompson\",\r\n        description: \"I was skeptical at first, but the performance gains are undeniable. The snappy animations and clean UI make it a joy to use daily.\"\r\n    },\r\n    {\r\n        id: 3,\r\n        image: \"https://images.unsplash.com/photo-1633332755192-727a05c4013d?q=80&w=200&auto=format&fit=crop\",\r\n        title: \"Alex Riviera\",\r\n        description: \"Finally, a solution that actually considers dark mode as a first-class citizen. The attention to detail in the design system is outstanding.\"\r\n    }\r\n];\r\n\r\nexport default function ToastTabs({\r\n    tabs = defaultTabs,\r\n    autoplay = true,\r\n    autoplayDelay = 3000,\r\n    ringColor = \"#f97316\", // Orange-500 default\r\n    className,\r\n}: ToastTabsProps) {\r\n    const [activeIndex, setActiveIndex] = useState(0);\r\n    const [isPaused, setIsPaused] = useState(false);\r\n    const progressRef = useRef(0);\r\n    const [progress, setProgress] = useState(0);\r\n    const lastTimeRef = useRef<number>(0);\r\n    const requestRef = useRef<number>(null);\r\n\r\n    // Refs for keyboard navigation logic\r\n    const buttonRefs = useRef<(HTMLButtonElement | null)[]>([]);\r\n\r\n    useEffect(() => {\r\n        // Adjust refs array size if tabs change\r\n        buttonRefs.current = buttonRefs.current.slice(0, tabs.length);\r\n    }, [tabs]);\r\n\r\n    // Handle Autoplay Loop\r\n    const animate = useCallback((time: number) => {\r\n        if (!lastTimeRef.current) lastTimeRef.current = time;\r\n        const deltaTime = time - lastTimeRef.current;\r\n        lastTimeRef.current = time;\r\n\r\n        if (!isPaused && autoplay) {\r\n            progressRef.current += deltaTime;\r\n            const newProgress = Math.min(progressRef.current / autoplayDelay, 1);\r\n            setProgress(newProgress * 100);\r\n\r\n            if (progressRef.current >= autoplayDelay) {\r\n                setActiveIndex((prev) => (prev + 1) % tabs.length);\r\n                progressRef.current = 0;\r\n                setProgress(0);\r\n            }\r\n        }\r\n        requestRef.current = requestAnimationFrame(animate);\r\n    }, [autoplay, autoplayDelay, isPaused, tabs.length]);\r\n\r\n    useEffect(() => {\r\n        requestRef.current = requestAnimationFrame(animate);\r\n        return () => {\r\n            if (requestRef.current) cancelAnimationFrame(requestRef.current);\r\n        };\r\n    }, [animate]);\r\n\r\n    // Reset progress when manually changing tabs\r\n    const handleTabClick = (index: number) => {\r\n        setActiveIndex(index);\r\n        progressRef.current = 0;\r\n        setProgress(0);\r\n    };\r\n\r\n    // Keyboard Navigation\r\n    const handleKeyDown = (e: React.KeyboardEvent, index: number) => {\r\n        if (e.key === \"ArrowRight\") {\r\n            e.preventDefault(); // Prevent scroll\r\n            const nextIndex = (index + 1) % tabs.length;\r\n            setActiveIndex(nextIndex);\r\n            buttonRefs.current[nextIndex]?.focus();\r\n            progressRef.current = 0;\r\n            setProgress(0);\r\n        } else if (e.key === \"ArrowLeft\") {\r\n            e.preventDefault(); // Prevent scroll\r\n            const prevIndex = (index - 1 + tabs.length) % tabs.length;\r\n            setActiveIndex(prevIndex);\r\n            buttonRefs.current[prevIndex]?.focus();\r\n            progressRef.current = 0;\r\n            setProgress(0);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={cn(\"w-full max-w-2xl mx-auto flex flex-col items-center gap-8 [--beam-color:var(--custom-color)] dark:[--beam-color:#ffffff]\", className)}\r\n            style={{ \"--custom-color\": ringColor } as React.CSSProperties}\r\n            onMouseEnter={() => setIsPaused(true)}\r\n            onMouseLeave={() => {\r\n                setIsPaused(false);\r\n                lastTimeRef.current = 0;\r\n            }}\r\n        >\r\n            {/* --- Content Area (Toast) --- */}\r\n            <div className=\"relative w-full text-center px-4 mb-4 flex items-center justify-center min-h-[110px]\">\r\n                <AnimatePresence mode=\"popLayout\">\r\n                    <motion.div\r\n                        key={activeIndex}\r\n                        initial={{ opacity: 0, y: 20, scale: 0.9, filter: \"blur(4px)\" }}\r\n                        animate={{ opacity: 1, y: 0, scale: 1, filter: \"blur(0px)\" }}\r\n                        exit={{ opacity: 0, y: -20, scale: 0.9, filter: \"blur(4px)\" }}\r\n                        transition={{ duration: 0.4, type: \"spring\", stiffness: 260, damping: 20 }}\r\n                        className=\"bg-neutral-100 dark:bg-neutral-800 border-2 border-dotted border-neutral-300 dark:border-neutral-600 rounded-2xl p-3 shadow-sm max-w-xs relative cursor-default select-none\"\r\n                    >\r\n                        <p className=\"text-sm leading-relaxed text-neutral-900 dark:text-white font-medium\">\r\n                            \"{tabs[activeIndex].description}\"\r\n                        </p>\r\n\r\n                        <div className=\"absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-neutral-100 dark:bg-neutral-800 border-b-2 border-r-2 border-dotted border-neutral-300 dark:border-neutral-600 rotate-45\" />\r\n                    </motion.div>\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* --- Tabs / Head --- */}\r\n            <div className=\"flex items-center gap-4\" role=\"tablist\">\r\n                {tabs.map((tab, index) => {\r\n                    const isActive = activeIndex === index;\r\n                    return (\r\n                        <button\r\n                            key={tab.id}\r\n                            ref={el => {\r\n                                buttonRefs.current[index] = el;\r\n                            }}\r\n                            onClick={() => handleTabClick(index)}\r\n                            onKeyDown={(e) => handleKeyDown(e, index)}\r\n                            className=\"relative flex items-center justify-center p-0 bg-transparent border-none appearance-none select-none outline-none focus:outline-none focus-visible:outline-none focus-visible:ring-0 text-[0px] leading-none group transition-transform duration-300 hover:-translate-y-2 focus-visible:-translate-y-2\"\r\n                            style={{ WebkitTapHighlightColor: \"transparent\" }}\r\n                            aria-selected={isActive}\r\n                            role=\"tab\"\r\n                            tabIndex={isActive ? 0 : -1}\r\n                        >\r\n                            {/* Active Ring & Progress Indicator (Glass Effect) */}\r\n                            {isActive && (\r\n                                <motion.div\r\n                                    layoutId=\"active-ring\"\r\n                                    className=\"absolute -inset-2 rounded-full z-0 pointer-events-none bg-neutral-200/50 dark:bg-neutral-700/30 backdrop-blur-md shadow-sm border border-white/20 dark:border-white/10\"\r\n                                    transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n                                >\r\n                                    {/* Rotating SVG for the beam effect */}\r\n                                    <svg className=\"w-full h-full -rotate-90\" viewBox=\"0 0 60 60\">\r\n\r\n                                        {/* Progress Trail (Beam) */}\r\n                                        {autoplay && (\r\n                                            <>\r\n                                                <circle\r\n                                                    cx=\"30\"\r\n                                                    cy=\"30\"\r\n                                                    r=\"28\"\r\n                                                    fill=\"none\"\r\n                                                    stroke=\"var(--beam-color)\"\r\n                                                    strokeWidth=\"1.5\"\r\n                                                    strokeDasharray=\"175.929\"\r\n                                                    strokeDashoffset={175.929 * (1 - progress / 100)}\r\n                                                    strokeLinecap=\"round\"\r\n                                                    className=\"transition-all duration-75 ease-linear opacity-80\"\r\n                                                    style={{ filter: `drop-shadow(0 0 2px var(--beam-color))` }}\r\n                                                />\r\n                                            </>\r\n                                        )}\r\n\r\n                                        {/* Static ring indicator if no autoplay */}\r\n                                        {!autoplay && (\r\n                                            <circle\r\n                                                cx=\"30\"\r\n                                                cy=\"30\"\r\n                                                r=\"28\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"var(--beam-color)\"\r\n                                                strokeWidth=\"1.5\"\r\n                                                style={{ filter: `drop-shadow(0 0 4px var(--beam-color))` }}\r\n                                            />\r\n                                        )}\r\n                                    </svg>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Avatar Image */}\r\n                            <div className={cn(\r\n                                \"relative z-10 w-12 h-12 rounded-full overflow-hidden transition-all duration-300 border-2\",\r\n                                isActive\r\n                                    ? \"scale-125 border-transparent shadow-xl z-20\"\r\n                                    : \"scale-90 border-transparent opacity-40 grayscale hover:grayscale-0 hover:opacity-100 hover:scale-110 group-focus-visible:grayscale-0 group-focus-visible:opacity-100\"\r\n                            )}>\r\n                                <img\r\n                                    src={tab.image}\r\n                                    alt={tab.title}\r\n                                    className=\"w-full h-full object-cover\"\r\n                                />\r\n                            </div>\r\n                        </button>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n",
      "type": "registry:ui",
      "target": "components/rareui/ToastTabs.tsx"
    }
  ]
}