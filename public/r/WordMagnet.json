{
  "name": "WordMagnet",
  "type": "registry:ui",
  "dependencies": [
    "react",
    "framer-motion",
    "@types/react",
    "typescript"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/rareui/Text Animation/WordMagnet.tsx",
      "content": "\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState, startTransition } from \"react\";\r\nimport { motion, useSpring, useMotionValue, MotionValue } from \"framer-motion\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface WordMagnetProps {\r\n    /**\r\n     * The text content to display\r\n     */\r\n    text?: string;\r\n    /**\r\n     * Interaction radius in pixels\r\n     */\r\n    radius?: number;\r\n    /**\r\n     * Repulsion force (0.1 to 1.0)\r\n     */\r\n    force?: number;\r\n    /**\r\n     * Spring damping (5 to 50)\r\n     */\r\n    damping?: number;\r\n    /**\r\n     * Delay before returning to original position in ms\r\n     */\r\n    returnDelay?: number;\r\n    /**\r\n     * Text color\r\n     */\r\n    textColor?: string;\r\n    /**\r\n     * Font styling object\r\n     */\r\n    font?: React.CSSProperties;\r\n    /**\r\n     * Disable interaction on mobile devices\r\n     */\r\n    disableOnMobile?: boolean;\r\n    /**\r\n     * CSS overflow property\r\n     */\r\n    overflow?: \"visible\" | \"hidden\" | \"scroll\" | \"auto\";\r\n    /**\r\n     * Additional class names\r\n     */\r\n    className?: string;\r\n    /**\r\n     * Inline styles\r\n     */\r\n    style?: React.CSSProperties;\r\n}\r\n\r\nexport default function WordMagnet({\r\n    text = \"Hover over these words and watch them dance\",\r\n    radius = 130,\r\n    force = 0.45,\r\n    damping = 28,\r\n    returnDelay = 400,\r\n    textColor = \"#000000\",\r\n    font = {\r\n        fontSize: \"32px\",\r\n        fontWeight: 600, // Semibold\r\n        letterSpacing: \"-0.03em\",\r\n        lineHeight: \"1.2em\",\r\n    },\r\n    disableOnMobile = false,\r\n    overflow = \"visible\",\r\n    className,\r\n    style,\r\n}: WordMagnetProps) {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const [words, setWords] = useState<string[]>([]);\r\n    const [isMobile, setIsMobile] = useState(false);\r\n\r\n    // Motion values to track mouse position relative to container\r\n    const mouseX = useMotionValue(0);\r\n    const mouseY = useMotionValue(0);\r\n    const lastMoveTime = useRef(0);\r\n    const throttleDelay = 16; // ~60fps\r\n\r\n    // Detect mobile\r\n    useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const checkMobile = () => {\r\n                startTransition(() => {\r\n                    setIsMobile(window.innerWidth < 768 || \"ontouchstart\" in window);\r\n                });\r\n            };\r\n            checkMobile();\r\n            window.addEventListener(\"resize\", checkMobile);\r\n            return () => window.removeEventListener(\"resize\", checkMobile);\r\n        }\r\n    }, []);\r\n\r\n    // Split text into words\r\n    useEffect(() => {\r\n        startTransition(() => {\r\n            setWords(text.split(\" \").filter((word) => word.length > 0));\r\n        });\r\n    }, [text]);\r\n\r\n    // Track mouse movement\r\n    useEffect(() => {\r\n        if (disableOnMobile && isMobile) return;\r\n\r\n        const handleMouseMove = (e: MouseEvent) => {\r\n            const now = Date.now();\r\n            if (now - lastMoveTime.current < throttleDelay) return;\r\n            lastMoveTime.current = now;\r\n\r\n            if (containerRef.current) {\r\n                const rect = containerRef.current.getBoundingClientRect();\r\n                mouseX.set(e.clientX - rect.left);\r\n                mouseY.set(e.clientY - rect.top);\r\n            }\r\n        };\r\n\r\n        window.addEventListener(\"mousemove\", handleMouseMove);\r\n        return () => window.removeEventListener(\"mousemove\", handleMouseMove);\r\n    }, [mouseX, mouseY, isMobile, disableOnMobile]);\r\n\r\n    const isDisabled = disableOnMobile && isMobile;\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className={cn(\"flex flex-wrap items-center justify-center gap-[0.5em]\", className)}\r\n            style={{\r\n                ...style,\r\n                position: \"relative\",\r\n                overflow,\r\n                color: textColor,\r\n                ...font,\r\n            }}\r\n        >\r\n            {words.map((word, index) => (\r\n                <Word\r\n                    key={`${word}-${index}`}\r\n                    word={word}\r\n                    mouseX={mouseX}\r\n                    mouseY={mouseY}\r\n                    radius={radius}\r\n                    force={force}\r\n                    damping={damping}\r\n                    returnDelay={returnDelay}\r\n                    disabled={isDisabled}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface WordProps {\r\n    word: string;\r\n    mouseX: MotionValue<number>;\r\n    mouseY: MotionValue<number>;\r\n    radius: number;\r\n    force: number;\r\n    damping: number;\r\n    returnDelay: number;\r\n    disabled: boolean;\r\n}\r\n\r\nfunction Word({\r\n    word,\r\n    mouseX,\r\n    mouseY,\r\n    radius,\r\n    force,\r\n    damping,\r\n    returnDelay,\r\n    disabled,\r\n}: WordProps) {\r\n    const wordRef = useRef<HTMLSpanElement>(null);\r\n\r\n    // Spring animations for x and y displacement\r\n    const x = useSpring(0, { damping, stiffness: 200 });\r\n    const y = useSpring(0, { damping, stiffness: 200 });\r\n\r\n    const returnTimeout = useRef<number | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (disabled) return;\r\n\r\n        const unsubscribeX = mouseX.on(\"change\", (latestX) => {\r\n            if (!wordRef.current) return;\r\n\r\n            // Get word position relative to the container (which mouseX/Y are relative to)\r\n            // The parent container is the offsetParent\r\n            const offsetParent = wordRef.current.offsetParent as HTMLElement;\r\n            if (!offsetParent) return;\r\n\r\n            const rect = wordRef.current.getBoundingClientRect();\r\n            const parentRect = offsetParent.getBoundingClientRect();\r\n\r\n            // Center of the word relative to the container\r\n            const wordCenterX = rect.left - parentRect.left + rect.width / 2;\r\n            const wordCenterY = rect.top - parentRect.top + rect.height / 2;\r\n\r\n            const currentMouseY = mouseY.get();\r\n\r\n            const dx = wordCenterX - latestX;\r\n            const dy = wordCenterY - currentMouseY;\r\n            const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n            if (distance < radius) {\r\n                const angle = Math.atan2(dy, dx);\r\n                // Repel force calculation\r\n                const repelForce = ((radius - distance) / radius) * force * 100;\r\n\r\n                const offsetX = Math.cos(angle) * repelForce;\r\n                const offsetY = Math.sin(angle) * repelForce;\r\n\r\n                x.set(offsetX);\r\n                y.set(offsetY);\r\n\r\n                if (returnTimeout.current !== null) {\r\n                    window.clearTimeout(returnTimeout.current);\r\n                }\r\n\r\n                returnTimeout.current = window.setTimeout(() => {\r\n                    x.set(0);\r\n                    y.set(0);\r\n                }, returnDelay);\r\n            }\r\n        });\r\n\r\n        const unsubscribeY = mouseY.on(\"change\", () => {\r\n\r\n\r\n            if (!wordRef.current) return;\r\n            const offsetParent = wordRef.current.offsetParent as HTMLElement;\r\n            if (!offsetParent) return;\r\n\r\n            const rect = wordRef.current.getBoundingClientRect();\r\n            const parentRect = offsetParent.getBoundingClientRect();\r\n\r\n            const wordCenterX = rect.left - parentRect.left + rect.width / 2;\r\n            const wordCenterY = rect.top - parentRect.top + rect.height / 2;\r\n\r\n            const mouseXVal = mouseX.get();\r\n            const mouseYVal = mouseY.get();\r\n\r\n            const dx = wordCenterX - mouseXVal;\r\n            const dy = wordCenterY - mouseYVal;\r\n            const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n            if (distance < radius) {\r\n                const angle = Math.atan2(dy, dx);\r\n                const repelForce = ((radius - distance) / radius) * force * 100;\r\n                const offsetX = Math.cos(angle) * repelForce;\r\n                const offsetY = Math.sin(angle) * repelForce;\r\n                x.set(offsetX);\r\n                y.set(offsetY);\r\n\r\n                if (returnTimeout.current !== null) {\r\n                    window.clearTimeout(returnTimeout.current);\r\n                }\r\n                returnTimeout.current = window.setTimeout(() => {\r\n                    x.set(0);\r\n                    y.set(0);\r\n                }, returnDelay);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            unsubscribeX();\r\n            unsubscribeY();\r\n            if (returnTimeout.current !== null) {\r\n                window.clearTimeout(returnTimeout.current);\r\n            }\r\n        };\r\n    }, [mouseX, mouseY, radius, force, x, y, returnDelay, disabled]);\r\n\r\n    if (disabled) {\r\n        return <span className=\"inline-block whitespace-nowrap\">{word}</span>;\r\n    }\r\n\r\n    return (\r\n        <motion.span\r\n            ref={wordRef}\r\n            className=\"inline-block whitespace-nowrap\"\r\n            style={{ x, y }}\r\n        >\r\n            {word}\r\n        </motion.span>\r\n    );\r\n}\r\n",
      "type": "registry:ui",
      "target": "components/rareui/Text Animation/WordMagnet.tsx"
    }
  ]
}