{
  "name": "imageExpandTestimonial",
  "type": "registry:ui",
  "dependencies": [
    "react",
    "motion",
    "lucide-react",
    "next",
    "clsx",
    "tailwind-merge",
    "@types/react",
    "typescript"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/rareui/Sections/imageExpandTestimonial.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { motion, AnimatePresence } from \"motion/react\";\r\nimport { ArrowLeft, ArrowLeftIcon, ArrowRight, ArrowRightIcon, Star, StarIcon } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\ninterface Testimonial {\r\n  id: string;\r\n  name: string;\r\n  role: string;\r\n  company: string;\r\n  quote: string;\r\n  image: string;\r\n  rating?: number;\r\n}\r\n\r\ninterface ImageExpandTestimonialProps {\r\n  testimonials: Testimonial[];\r\n  autoPlayInterval?: number;\r\n  className?: string;\r\n}\r\n\r\nexport function ImageExpandTestimonial({\r\n  testimonials,\r\n  autoPlayInterval = 5000,\r\n  className,\r\n}: ImageExpandTestimonialProps) {\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const nextTestimonial = useCallback(() => {\r\n    setActiveIndex(\r\n      (prev) => (prev - 1 + testimonials.length) % testimonials.length\r\n    );\r\n  }, [testimonials.length]);\r\n\r\n  const prevTestimonial = useCallback(() => {\r\n    setActiveIndex((prev) => (prev + 1) % testimonials.length);\r\n  }, [testimonials.length]);\r\n\r\n  // Handle responsive state to switch between \"Center Active\" (Mobile) and \"Right Active\" (Desktop)\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth < 1024);\r\n    };\r\n    checkMobile(); // Check on mount\r\n    window.addEventListener(\"resize\", checkMobile);\r\n    return () => window.removeEventListener(\"resize\", checkMobile);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    timerRef.current = setInterval(nextTestimonial, autoPlayInterval);\r\n    return () => {\r\n      if (timerRef.current) clearInterval(timerRef.current);\r\n    };\r\n  }, [nextTestimonial, autoPlayInterval, activeIndex]);\r\n\r\n  const activeTestimonial = testimonials[activeIndex];\r\n\r\n  return (\r\n    <div\r\n      className={twMerge(\r\n        \"w-full max-w-7xl mx-auto px-4 lg:px-8 py-12 font-sans overflow-hidden\",\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"flex flex-col lg:flex-row gap-8 lg:gap-12 lg:h-[600px] items-stretch\">\r\n        {/* SECTION 1: Metadata (Desktop Only Left Sidebar) */}\r\n        <div className=\"hidden lg:flex flex-col justify-between w-24 border-r border-gray-100 py-4 shrink-0\">\r\n          <div className=\"text-sm font-semibold tracking-widest text-gray-900 dark:text-white\">\r\n            {String(activeIndex + 1).padStart(2, \"0\")} /{\" \"}\r\n            {String(testimonials.length).padStart(2, \"0\")}\r\n          </div>\r\n          <div className=\"relative h-full w-full flex items-center justify-center\">\r\n            <div className=\"-rotate-90 whitespace-nowrap text-gray-400 dark:text-gray-500 font-bold tracking-[0.2em] uppercase text-xs origin-center absolute\">\r\n              Reviews\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* SECTION 2: Images (Center-Left) */}\r\n        <div className=\"flex-1 min-w-0 flex items-end justify-center lg:justify-end gap-4 h-[350px] lg:h-full w-full overflow-hidden\">\r\n          {(() => {\r\n            // Logic:\r\n            // Desktop (>=1024): Active is Last (Right side).\r\n            // Mobile (<1024): Active is Center.\r\n\r\n            let rotatedTestimonials = [];\r\n            const len = testimonials.length;\r\n\r\n            if (isMobile) {\r\n              // Center active element for mobile\r\n              const mid = Math.floor(len / 2); // e.g. 4/2 = 2\r\n              // We want activeIndex to appear at index 'mid' in the rendered array\r\n              // If activeIndex is 0, we want it at index 2.\r\n              // Shift: (0 - 2) = -2 => +4 = 2.\r\n              const start = (activeIndex - mid + len) % len;\r\n              rotatedTestimonials = [\r\n                ...testimonials.slice(start),\r\n                ...testimonials.slice(0, start),\r\n              ];\r\n            } else {\r\n              // Desktop: Active Last\r\n              rotatedTestimonials = [\r\n                ...testimonials.slice(activeIndex + 1),\r\n                ...testimonials.slice(0, activeIndex + 1),\r\n              ];\r\n            }\r\n\r\n            return rotatedTestimonials.map((testimonial) => {\r\n              const isActive = testimonial.id === activeTestimonial.id;\r\n\r\n              // Dynamic dimensions based on device state\r\n              const desktopActiveWidth = 220;\r\n              const desktopActiveHeight = 550;\r\n              const mobileActiveWidth = 200; // Reduced for smaller screens\r\n              const mobileActiveHeight = 350;\r\n\r\n              const desktopInactiveWidth = 100;\r\n              const desktopInactiveHeight = 100;\r\n              const mobileInactiveWidth = 60;\r\n              const mobileInactiveHeight = 80;\r\n\r\n              return (\r\n                <motion.div\r\n                  key={testimonial.id}\r\n                  layout // Essential for smooth reordering animation\r\n                  onClick={() => {\r\n                    const originalIndex = testimonials.findIndex(\r\n                      (t) => t.id === testimonial.id\r\n                    );\r\n                    setActiveIndex(originalIndex);\r\n                  }}\r\n                  className={clsx(\r\n                    \"relative cursor-pointer rounded-md bg-gray-200 dark:bg-neutral-800 shrink-0 overflow-hidden shadow-lg border border-white/50 dark:border-white/10\",\r\n                    isActive\r\n                      ? \"z-10 shadow-2xl\"\r\n                      : \"z-0 opacity-60 hover:opacity-100\"\r\n                  )}\r\n                  animate={{\r\n                    width: isActive\r\n                      ? isMobile\r\n                        ? mobileActiveWidth\r\n                        : desktopActiveWidth\r\n                      : isMobile\r\n                        ? mobileInactiveWidth\r\n                        : desktopInactiveWidth,\r\n                    height: isActive\r\n                      ? isMobile\r\n                        ? mobileActiveHeight\r\n                        : desktopActiveHeight\r\n                      : isMobile\r\n                        ? mobileInactiveHeight\r\n                        : desktopInactiveHeight,\r\n                    filter: isActive\r\n                      ? \"grayscale(0%) brightness(1.05)\"\r\n                      : \"grayscale(100%) brightness(0.9)\",\r\n                  }}\r\n                  transition={{\r\n                    type: \"spring\",\r\n                    stiffness: 180,\r\n                    damping: 24,\r\n                    mass: 1.2,\r\n                  }}\r\n                >\r\n                  <Image\r\n                    src={testimonial.image}\r\n                    alt={testimonial.name}\r\n                    fill\r\n                    className=\"object-cover\"\r\n                    sizes={isActive ? \"400px\" : \"150px\"}\r\n                  />\r\n                  {!isActive && (\r\n                    <div className=\"absolute inset-0 bg-black/10 transition-colors hover:bg-transparent\" />\r\n                  )}\r\n                </motion.div>\r\n              );\r\n            });\r\n          })()}\r\n        </div>\r\n\r\n        {/* SECTION 3: Content (Right) */}\r\n        <div className=\"flex flex-col justify-center lg:w-[400px] xl:w-[450px] space-y-6 lg:space-y-8 shrink-0 px-2 lg:px-0\">\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              key={activeTestimonial.id}\r\n              initial={{ opacity: 0, x: 20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              exit={{ opacity: 0, x: -20 }}\r\n              transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n              className=\"space-y-4 lg:space-y-6 text-center lg:text-left\"\r\n            >\r\n              <div>\r\n                <h3 className=\"text-xl lg:text-3xl font-bold text-gray-900 dark:text-white tracking-tight\">\r\n                  {activeTestimonial.name}\r\n                </h3>\r\n                <div className=\"text-xs lg:text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mt-1\">\r\n                  {activeTestimonial.company}\r\n                </div>\r\n              </div>\r\n\r\n              <blockquote className=\"text-md lg:text-xl font-medium leading-tight text-gray-800 dark:text-gray-200\">\r\n                &ldquo;{activeTestimonial.quote}&rdquo;\r\n              </blockquote>\r\n\r\n              <div className=\"flex gap-1 pt-2\">\r\n                {[0, 1, 2, 3, 4].map((index) => {\r\n                  const rating = activeTestimonial.rating || 5;\r\n                  const isFull = rating >= index + 1;\r\n                  const isHalf = rating > index && rating < index + 1;\r\n\r\n                  return (\r\n                    <div key={index} className=\"relative w-5 h-5\">\r\n                      {/* Background/Empty Star */}\r\n                      <StarIcon className=\"absolute inset-0 text-gray-200 dark:text-neutral-700 fill-gray-200 dark:fill-neutral-700\" />\r\n\r\n                      {/* Full Star Overlay */}\r\n                      {isFull && (\r\n                        <StarIcon className=\"absolute inset-0 text-yellow-400 fill-yellow-400\" />\r\n                      )}\r\n\r\n                      {/* Half Star Overlay */}\r\n                      {isHalf && (\r\n                        <div className=\"absolute inset-0 overflow-hidden w-1/2\">\r\n                          <StarIcon className=\"w-5 h-5 text-yellow-400 fill-yellow-400\" />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n\r\n          {/* Navigation Buttons */}\r\n          <div className=\"flex items-center justify-center lg:justify-start gap-4 pt-4 lg:pt-8\">\r\n            <button\r\n              onClick={prevTestimonial}\r\n              className=\"p-4 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-neutral-700 hover:scale-105 transition-all focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600\"\r\n              aria-label=\"Previous testimonial\"\r\n            >\r\n              <ArrowLeftIcon className=\"w-5 h-5 lg:w-6 lg:h-6\" />\r\n            </button>\r\n            <button\r\n              onClick={nextTestimonial}\r\n              className=\"p-4 rounded-full bg-yellow-400 text-black shadow-lg shadow-yellow-400/30 hover:bg-yellow-300 hover:scale-110 active:scale-95 transition-all focus:outline-none focus:ring-2 focus:ring-yellow-400\"\r\n              aria-label=\"Next testimonial\"\r\n            >\r\n              <ArrowRightIcon className=\"w-5 h-5 lg:w-6 lg:h-6\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Index Indicator */}\r\n      <div className=\"flex lg:hidden justify-center items-center mt-8 gap-2\">\r\n        {testimonials.map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className={clsx(\r\n              \"h-1.5 rounded-full transition-all duration-300\",\r\n              i === activeIndex\r\n                ? \"w-8 bg-yellow-400\"\r\n                : \"w-1.5 bg-gray-300 dark:bg-gray-700\"\r\n            )}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:ui",
      "target": "components/rareui/Sections/imageExpandTestimonial.tsx"
    }
  ]
}